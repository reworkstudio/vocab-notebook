<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–°–ª–æ–≤–Ω–∏—á–æ–∫ / Vocabulary</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #141f23;
      --text: #ffffff;
      --primary: #92d334;
      --primary-dark: #7bb42d;
      --danger: #e74c3c;
      --danger-dark: #c0392b;
      --card-bg: #1b2a2f;
      --border: #3a4a4f;
    }

    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      background: var(--primary);
      color: #000;
      padding: 1rem;
      text-align: center;
      font-size: 1.6rem;
      font-weight: 600;
    }

    .container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
    }

    .card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border: 1px solid var(--border);
    }

    h2 {
      margin-top: 0;
      font-size: 1.2rem;
    }

    input, select, button {
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.7rem;
      font-size: 1rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      box-sizing: border-box;
      background: #0f1a1f;
      color: var(--text);
    }

    button {
      background: var(--primary);
      color: #000;
      cursor: pointer;
      transition: background 0.2s;
      font-weight: 600;
    }

    button:hover {
      background: var(--primary-dark);
    }

    .delete {
      background: var(--danger);
      color: #fff;
    }

    .delete:hover {
      background: var(--danger-dark);
    }

    .entry {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.8rem;
      margin-top: 0.5rem;
      display: flex;
      flex-direction: column;
    }

    .entry-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .flex-row {
      display: flex;
      gap: 1rem;
    }

    .flex-row > * {
      flex: 1;
    }
  </style>
</head>
<body>
  <header>üåç –ú—ñ–π –°–ª–æ–≤–Ω–∏—á–æ–∫</header>
  <div class="container">
    <div class="card">
      <h2>–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h2>
      <div class="flex-row">
        <input id="categoryInput" placeholder="–ù–æ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è" />
        <button onclick="addCategory()">‚ûï</button>
      </div>
      <select id="categorySelect" onchange="selectCategory()"></select>
    </div>

    <div class="card">
      <h2>–ü—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</h2>
      <div class="flex-row">
        <input id="subcategoryInput" placeholder="–ù–æ–≤–∞ –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—è" />
        <button onclick="addSubcategory()">‚ûï</button>
      </div>
      <select id="subcategorySelect" onchange="selectSubcategory()"></select>
    </div>

    <div class="card">
      <h2>–§—Ä–∞–∑–∏</h2>
      <input id="original" placeholder="–§—Ä–∞–∑–∞" />
      <input id="reading" placeholder="–Ø–∫ —á–∏—Ç–∞—î—Ç—å—Å—è" />
      <input id="translation" placeholder="–ü–µ—Ä–µ–∫–ª–∞–¥" />
      <button onclick="addEntry()">üí¨ –î–æ–¥–∞—Ç–∏</button>
      <input id="searchInput" placeholder="–ü–æ—à—É–∫ —Ñ—Ä–∞–∑–∏..." oninput="renderEntries()" />
      <div id="entries"></div>
    </div>
  </div>
  <script>
    let data = JSON.parse(localStorage.getItem('vocab') || '{}');
    let currentCategory = null;
    let currentSubcategory = null;

    function save() {
      localStorage.setItem('vocab', JSON.stringify(data));
    }

    function addCategory() {
      const name = categoryInput.value.trim();
      if (!name || data[name]) return;
      data[name] = {};
      save();
      categoryInput.value = '';
      refreshCategories();
    }

    function refreshCategories() {
      categorySelect.innerHTML = '<option disabled selected>–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</option>';
      for (let cat in data) {
        const opt = new Option(cat, cat);
        categorySelect.add(opt);
      }
    }

    function selectCategory() {
      currentCategory = categorySelect.value;
      refreshSubcategories();
    }

    function addSubcategory() {
      const name = subcategoryInput.value.trim();
      if (!name || data[currentCategory][name]) return;
      data[currentCategory][name] = [];
      save();
      subcategoryInput.value = '';
      refreshSubcategories();
    }

    function refreshSubcategories() {
      subcategorySelect.innerHTML = '<option disabled selected>–û–±–µ—Ä—ñ—Ç—å –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—é</option>';
      for (let sub in data[currentCategory]) {
        const opt = new Option(sub, sub);
        subcategorySelect.add(opt);
      }
    }

    function selectSubcategory() {
      currentSubcategory = subcategorySelect.value;
      renderEntries();
    }

    function addEntry() {
      const o = original.value.trim();
      const r = reading.value.trim();
      const t = translation.value.trim();
      if (!o || !r || !t) return;
      data[currentCategory][currentSubcategory].push({ o, r, t });
      save();
      original.value = reading.value = translation.value = '';
      renderEntries();
    }

    function renderEntries() {
      const entries = data[currentCategory][currentSubcategory] || [];
      const container = document.getElementById('entries');
      const query = document.getElementById('searchInput').value.trim().toLowerCase();
      container.innerHTML = '';
      entries
        .filter(e =>
          e.o.toLowerCase().includes(query) ||
          e.r.toLowerCase().includes(query) ||
          e.t.toLowerCase().includes(query)
        )
        .forEach((e, i) => {
          const div = document.createElement('div');
          div.className = 'entry';
          div.innerHTML = `
            <div><b>–§—Ä–∞–∑–∞:</b> <span contenteditable onblur="update(${i}, 'o', this.innerText)">${e.o}</span></div>
            <div><b>–Ø–∫ —á–∏—Ç–∞—Ç–∏:</b> <span contenteditable onblur="update(${i}, 'r', this.innerText)">${e.r}</span></div>
            <div><b>–ü–µ—Ä–µ–∫–ª–∞–¥:</b> <span contenteditable onblur="update(${i}, 't', this.innerText)">${e.t}</span></div>
            <div class="entry-buttons">
              <button class="delete" onclick="remove(${i})">‚úï</button>
            </div>
          `;
          container.appendChild(div);
        });
    }

    function update(i, key, value) {
      data[currentCategory][currentSubcategory][i][key] = value.trim();
      save();
    }

    function remove(i) {
      data[currentCategory][currentSubcategory].splice(i, 1);
      save();
      renderEntries();
    }

    refreshCategories();
  </script>
</body>
</html>
